{% load i18n admin_urls %}
<div class="submit-row">
{% if show_save %}<input type="submit" value="{% trans 'Save' %}" class="default" name="_save" {% if onclick_attrib %}onclick="{{ onclick_attrib }}"{% endif %} />{% endif %}
{% if show_save_and_continue %}<input type="submit" value="{% trans 'Save and continue editing' %}" name="_continue" />{% endif %}
{% if show_save_and_add_another %}<input type="submit" value="{% trans 'Save and add another' %}" name="_addanother" />{% endif %}
{% if show_delete_link %}<p class="deletelink-box"><a href="{% url opts|admin_urlname:'delete' original.pk|admin_urlquote %}" class="deletelink">{% trans 'Delete' %}</a></p>{% endif %}

</div>
{% block extra_js %}
<script>


  document.getElementsByName("_save")[0].addEventListener("click", function() {
      console.log("cnm")
  let projectName = document.getElementById("id_project_name").value;
    let projectAuthor = document.getElementById("id_project_author").value; // 获取项目作者输入框的值
      let projectType = document.getElementById("id_project_type").value;
       let SingleDetermination=document.getElementById("id_SingleDetermination").value


    // 发送POST请求到Django视图
    fetch('/project/create_users/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}',
        },
        body: JSON.stringify({
            project_name: projectName,
            project_author: projectAuthor,
              project_type:projectType,
              Project_SingleDetermination:SingleDetermination
        }),
    }).then(response => {
        if (response.ok) {
            console.log("项目名称和作者已成功发送至后端: " + projectName + " - " + projectAuthor+" - "+projectType+" - "+SingleDetermination);
        } else {
            console.error("请求失败");
        }
    });
});
 document.getElementsByName("_continue")[0].addEventListener("click", function() {
  console.log("cnm")
  let projectName = document.getElementById("id_project_name").value;
    let projectAuthor = document.getElementById("id_project_author").value; // 获取项目作者输入框的值
      let projectType = document.getElementById("id_project_type").value;
       let SingleDetermination=document.getElementById("id_SingleDetermination").value


    // 发送POST请求到Django视图
    fetch('/project/create_users/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}',
        },
        body: JSON.stringify({
            project_name: projectName,
            project_author: projectAuthor,
              project_type:projectType,
              Project_SingleDetermination:SingleDetermination
        }),
    }).then(response => {
        if (response.ok) {
            console.log("项目名称和作者已成功发送至后端: " + projectName + " - " + projectAuthor+" - "+projectType+" - "+SingleDetermination);
        } else {
            console.error("请求失败");
        }
    });
});
document.getElementsByName("_addanother")[0].addEventListener("click", function() {
      console.log("cnm")
  let projectName = document.getElementById("id_project_name").value;
    let projectAuthor = document.getElementById("id_project_author").value; // 获取项目作者输入框的值
      let projectType = document.getElementById("id_project_type").value;
       let SingleDetermination=document.getElementById("id_SingleDetermination").value


    // 发送POST请求到Django视图
    fetch('/project/create_users/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}',
        },
        body: JSON.stringify({
            project_name: projectName,
            project_author: projectAuthor,
              project_type:projectType,
              Project_SingleDetermination:SingleDetermination
        }),
    }).then(response => {
        if (response.ok) {
            console.log("项目名称和作者已成功发送至后端: " + projectName + " - " + projectAuthor+" - "+projectType+" - "+SingleDetermination);
        } else {
            console.error("请求失败");
        }
    });
});



</script>
{% endblock %}